<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ui</title>
  <script src="../event.js"></script>
<style>
* {
  margin: 0;
  padding: 0;
}
body {
  background-color: #ccc;
}
.demos {
  margin: 30px;
}
.switch {
  position: relative;
  width: 76px;
  height: 32px;
  margin: 10px;
  cursor: pointer;
}
/* 原型 */
.switch-circle {}
.switch-circle .switch-open, .switch-circle .switch-close {
  border-radius: 15px;
}
.switch-circle .switch-open::after, .switch-circle .switch-close::after {
  border-radius: 50%;
}
/* 方块 */
.switch-rect {}
.switch-rect .switch-open, .switch-rect .switch-close {}
.switch-rect .switch-open::after, .switch-rect .switch-close::after {}
/* 公共css */
.switch-open, .switch-close {
  height: 100%;
}
.switch-open::before, .switch-close::before {
  height: 32px;
  line-height: 32px;
  position: absolute;
  transition: all .3s;
}
.switch-open::after, .switch-close::after {
  content: '';
  width: 24px;
  height: 24px;
  background-color: #fff;
  position: absolute;
  top: 4px;
  transition: all .3s;
}
/* 基础css */
.switch-open {
  background-color: #75df70;
}
.switch-open::before {
  content: '打开';
  color: #fff;
  left: 10px;
}
.switch-open::after {
  margin-left: -28px;
  left: 100%;
}
.switch-close {
  background-color: #eaeaea;
}
.switch-close::before {
  content: '关闭';
  color: #9f9f9f;
  left: 100%;
  margin-left: -40px;
}
.switch-close::after {
  left: 4px;
}
</style>
</head>
<body>
  <div class="demos">
    <div class="switch switch-circle">
      <div class="switch-open"></div>
    </div>
    <div class="switch switch-circle">
      <div class="switch-close"></div>
    </div>

    <div class="switch switch-rect">
      <div class="switch-open"></div>
    </div>
    <div class="switch switch-rect">
      <div class="switch-close"></div>
    </div>
  </div>
<script>
(function() {
  var demos = document.querySelector('.demos')
  var ev = new EventUtil()

  ev.addHanlder(demos, 'touchstart', function(e) {
    e = ev.getEvent(e)
    var target = ev.getTarget(e)
    if (target.className === 'switch-open') target.className = 'switch-close'
    else if (target.className === 'switch-close') target.className = 'switch-open'
  })

  ev.addHanlder(demos, 'touchend', function(e) {
    // 禁止touch时触发click事件
    e = ev.getEvent(e)
    e.preventDefault(e)
  })

  ev.addHanlder(demos, 'click', function(e) {
    e = ev.getEvent(e)
    var target = ev.getTarget(e)
    if (target.className === 'switch-open') target.className = 'switch-close'
    else if (target.className === 'switch-close') target.className = 'switch-open'
  })
  
})()
</script>
</body>
</html>